{% load static %}

<!DOCTYPE html>
<html>
  <head>
    <title>Resultados da Pesquisa</title>
    <link rel="stylesheet" type="text/css" href="{% static 'css/style-resultados-pesquisa.css' %}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Jost:wght@300&display=swap" rel="stylesheet">
  </head>
  <body class="light-theme">
    <img src="{% static 'figuras/toggle-light-theme.png' %}" alt="Alternar Tema" id="theme-toggle" class="toggle">

    <nav class="nav-inicio">
      <div class="left-div">
        <div>
          <a class="titulo-newz" href="{% url 'noticias_principais' %}">
            <img src="{% static 'figuras/newz-light-theme.png' %}" alt="Ícone" class="icon" id="logo">
            newz
          </a>
        </div>
      
        <div class="dropdown" style="margin-left: 10%; margin-right: -5%;">
          <button class="dropbtn">News Outlets</button>
            <div class="dropdown-content">
              <a href="{% url 'noticias_bbc' %}">BBC</a>
              <a href="{% url 'noticias_cnn' %}">CNN</a>
              <a href="{% url 'noticias_wsj' %}">WSJ</a>
            </div>
            <img src="{% static 'figuras/dropdown-light-theme.png' %}" alt="Ícone2" class="icon2" id="setinha">
        </div>

        <div class="dropdown">
          <button class="dropbtn">Categories</button>
            <div class="dropdown-content">
              <a href="{% url 'noticias_ciencia' %}">Science</a>
              <a href="{% url 'noticias_esportes' %}">Sports</a>
              <a href="{% url 'noticias_entretenimento' %}">Entertainment</a>
              <a href="{% url 'noticias_saude' %}">Health</a>
              <a href="{% url 'noticias_tecnologia' %}">Technology</a>
            </div>
            <img src="{% static 'figuras/dropdown-light-theme.png' %}" alt="Ícone2" class="icon2" id="setinha">
        </div>
      </div>

      <div class="right-div">
        <form class="form-pesquisa" method="GET" action="{% url 'resultados_pesquisa' %}">
          <input class="input-pesquisa" type="text" name="q" placeholder="{{ query }}" >
        </form>
        
        
        {% if user.is_authenticated %}
        <div class="logado">
          <h3>Hello, {{ user.username }}!</h3> 
          <a href="{% url 'custom_logout' %}">
            Sign out
          </a>
        </div>
        {% else %}
        <div class="entrar">
          <form method="post" action="{% url 'login' %}">
            {% csrf_token %}
            <button class="entrar-btn" type="submit">
              Sign in
            </button>
          </form>
          <p>
            <a href="{% url 'signup' %}">
              <button class="cadastrar-btn">
                  Sign up
              </button>
            </a>
          </p>
        {% endif %}
        </div>
      </div>
    </nav>
    <!-- <div class="ordenar" >
      <select name="ordenar" id="ordenar">
        <option value="asc">Mais antigos primeiro</option>
        <option value="desc">Mais recentes primeiro</option>
      </select>
    </div> -->

    <h1 class="title">Resultados da pesquisa para: "{{ query }}"</h1>
    <div class="lista-noticias">
      {% for noticia in resultados %}
        <div class="nova-noticia">
          <a href="{% url 'detalhes_noticia' noticia.url %}">
            <div class="nova-img-div">
              <img src="{{ noticia.urlToImage }}" alt="{{ noticia.title }}" class="imagem-lista">
            </div>
            <div class="noticia-title">
              <h2 class="abreviar">{{ noticia.title }}</h2>
              <p> By {{noticia.author}}</p>
              <p> Published at: {{noticia.publishedAt}}</p>
            </div>
          </a>
        </div>
      {% endfor %}
    </div>
    <div class="sem-resultados">
      {% if not resultados %}
          <h3>Nenhum resultado encontrado para: "{{ query }}"</h3>
      {% endif %}
    </div>

    <div class="footer">
      <div>
          IHC &copy; 2023
      </div>
      <div>
          <a href="https://github.com/GabrielSiqueira1/Newz">
            <img src="{% static 'figuras/github-light-theme.png' %}" alt="icon3" class="icon3" id="git">
          </a>
      </div>
    </div>

    <script>
      document.addEventListener('DOMContentLoaded', function () {
        const themeToggle = document.getElementById('theme-toggle'); // Adicione um botão de alternância com id="theme-toggle"
        const body = document.body;
        const currentTheme = localStorage.getItem('theme') || 'light-theme';
      
        body.classList.add(currentTheme);
  
        themeToggle.addEventListener('click', function () {
          document.body.classList.toggle('dark-theme');
          const newTheme = body.classList.contains('dark-theme') ? 'dark-theme' : 'light-theme';
          localStorage.setItem('theme', newTheme);
  
        });
        
      });
    </script>
  </body>
</html>
